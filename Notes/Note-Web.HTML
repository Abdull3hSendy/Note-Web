<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To-Do List with Deadline & Description</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }
    .container {
      max-width: 800px;
      width: 100%;
    }
    .task-info {
      font-size: 0.9rem;
      color: #555;
    }
    .countdown {
      font-weight: bold;
      color: #dc3545;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="text-primary mb-4">üìù To-Do List</h1>

    <div class="row g-2 mb-3 justify-content-center">
      <div class="col-md-4">
        <input type="text" id="taskInput" class="form-control" placeholder="Task title..." />
      </div>
      <div class="col-md-4">
        <input type="text" id="descriptionInput" class="form-control" placeholder="Description..." />
      </div>
      <div class="col-md-3">
        <input type="datetime-local" id="deadlineInput" class="form-control" />
      </div>
      <div class="col-md-1">
        <button class="btn btn-primary w-100" onclick="addTask()">Add</button>
      </div>
    </div>

    <ul id="taskList" class="list-group">
      <!-- Tasks will be added here -->
    </ul>
  </div>

  <script>
    function addTask() {
      const taskInput = document.getElementById("taskInput");
      const descriptionInput = document.getElementById("descriptionInput");
      const deadlineInput = document.getElementById("deadlineInput");

      const taskText = taskInput.value.trim();
      const descriptionText = descriptionInput.value.trim();
      const deadlineValue = deadlineInput.value;

      if (taskText === "" || deadlineValue === "") return;

      const now = new Date();
      const addedAt = now.toLocaleString("en-US");
      const deadline = new Date(deadlineValue);
      const taskId = "task-" + Date.now();

      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row";
      li.id = taskId;

      li.innerHTML = `
        <div class="flex-grow-1 text-start">
          <span class="fw-bold">${taskText}</span>
          <div class="fst-italic text-muted">${descriptionText || 'No description provided'}</div>
          <div class="task-info mt-1">
            üïì <span class="text-muted">Added:</span> ${addedAt}<br>
            üìÖ <span class="text-muted">Deadline:</span> ${deadline.toLocaleString("en-US")}<br>
            ‚è≥ <span class="text-muted">Remaining:</span> <span class="countdown" id="${taskId}-countdown">Calculating...</span>
          </div>
        </div>
        <div class="ms-md-3 mt-3 mt-md-0">
          <button class="btn btn-sm btn-danger" onclick="removeTask(this)">Delete</button>
        </div>
      `;

      document.getElementById("taskList").appendChild(li);
      updateCountdown(taskId, deadline);
      setInterval(() => updateCountdown(taskId, deadline), 1000);

      taskInput.value = "";
      descriptionInput.value = "";
      deadlineInput.value = "";
    }

    function removeTask(button) {
      const li = button.closest("li");
      li.remove();
    }

    function updateCountdown(taskId, deadline) {
      const now = new Date();
      const diff = deadline - now;

      const countdownEl = document.getElementById(`${taskId}-countdown`);
      if (!countdownEl) return;

      if (diff <= 0) {
        countdownEl.innerText = "Time's up!";
        countdownEl.style.color = "gray";
        return;
      }

      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);

      countdownEl.innerText = `${hours}h ${minutes}m ${seconds}s`;
    }
  </script>
</body>
</html>